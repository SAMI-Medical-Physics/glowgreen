
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>glowgreen.close_contact module &#8212; glowgreen 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="glowgreen.clearance module" href="glowgreen.clearance.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glowgreen.clearance.html" title="glowgreen.clearance module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">glowgreen 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >API reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="glowgreen.html" accesskey="U">glowgreen package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">glowgreen.close_contact module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-glowgreen.close_contact">
<span id="glowgreen-close-contact-module"></span><h1>glowgreen.close_contact module<a class="headerlink" href="#module-glowgreen.close_contact" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternOnceoff">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">ContactPatternOnceoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternOnceoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#glowgreen.close_contact._ContactPattern" title="glowgreen.close_contact._ContactPattern"><code class="xref py py-class docutils literal notranslate"><span class="pre">glowgreen.close_contact._ContactPattern</span></code></a></p>
<p>Class for onceoff contact patterns.</p>
<dl class="simple">
<dt>Constructor:</dt><dd><ul class="simple">
<li><p>Calls constructor of <a class="reference internal" href="#glowgreen.close_contact._ContactPattern" title="glowgreen.close_contact._ContactPattern"><code class="xref py py-class docutils literal notranslate"><span class="pre">_ContactPattern</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> are converted into numpy.ndarrays if they were not supplied as such.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Time (h) <strong>from end of delay</strong> to start of pattern element.</p></li>
<li><p><strong>c</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Duration (h) of pattern element.</p></li>
<li><p><strong>d</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Distance (m) of pattern element;
i.e., distance from radioactive person for duration of pattern element.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code> not 0 for first element of onceoff pattern.</p></li>
<li><p><strong>ValueError</strong> – If element of onceoff pattern has <code class="docutils literal notranslate"><span class="pre">d</span></code> of 0.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternOnceoff.get_dose">
<span class="sig-name descname"><span class="pre">get_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternOnceoff.get_dose" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dose (mSv) from sharing the onceoff pattern
with a radioactive person, for a given dose rate clearance function and delay period.</p>
<p>Unlike with repeating patterns, the dose from a onceoff pattern
is independent of the administration datetime.
<code class="docutils literal notranslate"><span class="pre">*args</span></code> allows this method to be called with additional argument <cite>administration datetime</cite>,
so it can be called the same way on both <a class="reference internal" href="#glowgreen.close_contact.ContactPatternRepeating" title="glowgreen.close_contact.ContactPatternRepeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContactPatternRepeating</span></code></a> and <a class="reference internal" href="#glowgreen.close_contact.ContactPatternOnceoff" title="glowgreen.close_contact.ContactPatternOnceoff"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContactPatternOnceoff</span></code></a> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>tau</strong> (<em>int</em><em> or </em><em>float</em>) – Delay period (h); i.e., the time
from administration to when the pattern is started.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">tau</span></code> less than 0.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dose (mSv) from the pattern.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternOnceoff.get_restriction">
<span class="sig-name descname"><span class="pre">get_restriction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_constraint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternOnceoff.get_restriction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the restriction period; i.e., the time from administration to beginning sharing the pattern with a
radioactive person, such that the dose from the pattern is equal to the dose constraint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>dose_constraint</strong> (<em>int</em><em> or </em><em>float</em>) – Dose constraint (mSv).</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em><em>, </em><em>optional</em>) – Administration datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">dose_constraint</span></code> not greater than 0.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Restriction period (h),
dose (mSv) from the pattern with this restriction period, and
datetime at the end of this restriction period (None if <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> is None).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple[float, float, datetime.datetime]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternRepeating">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">ContactPatternRepeating</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternRepeating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#glowgreen.close_contact._ContactPattern" title="glowgreen.close_contact._ContactPattern"><code class="xref py py-class docutils literal notranslate"><span class="pre">glowgreen.close_contact._ContactPattern</span></code></a></p>
<p>Class for infinitely repeating diurnal contact patterns.</p>
<dl class="simple">
<dt>Constructor:</dt><dd><ul class="simple">
<li><p>Calls constructor of <a class="reference internal" href="#glowgreen.close_contact._ContactPattern" title="glowgreen.close_contact._ContactPattern"><code class="xref py py-class docutils literal notranslate"><span class="pre">_ContactPattern</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> are converted into numpy.ndarrays if they were not supplied as such.</p></li>
<li><p>Pattern elements with duration longer than 1 h are broken up, so that
the restriction period can be better resolved.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Time (h) from 12 AM to start of pattern element.</p></li>
<li><p><strong>c</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Duration (h) of pattern element.</p></li>
<li><p><strong>d</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Distance (m) of pattern element;
i.e., distance from radioactive person for duration of pattern element.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If element of repeating pattern has <code class="docutils literal notranslate"><span class="pre">d</span></code> of 0 and <code class="docutils literal notranslate"><span class="pre">c</span></code> not 0.</p></li>
<li><p><strong>ValueError</strong> – If repeating pattern extends beyond pattern period (24 h).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternRepeating.get_dose">
<span class="sig-name descname"><span class="pre">get_dose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime.datetime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternRepeating.get_dose" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the lifetime dose (mSv) from sharing the infinitely repeating pattern
with a radioactive person, for a given dose rate clearance function,
delay period and administration datetime.</p>
<p>Implements method in: Cormack J &amp; Shearer J. “Calculation of radiation exposures from patients to whom
radioactive materials have been administered.” Phys Med Biol 1998; 43(3).</p>
<p>NB. If the delay period <code class="docutils literal notranslate"><span class="pre">tau</span></code> ends during a pattern element,
the dose calculated will not include a contribution from the
remainder of that pattern element in the first cycle.
I.e., the calculated dose will be for the delay period shifted forward (by less than 1 h)
to the end of the pattern element.
Hence, the potentially corrected delay period is returned along with the dose.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>tau</strong> (<em>int</em><em> or </em><em>float</em>) – Delay period (h); i.e., the time
from <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> to when the pattern is resumed.</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em>) – Administration datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">tau</span></code> less than 0.</p></li>
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">tau</span></code> is numpy.inf with repeating pattern.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dose (mSv) from the pattern from the end of the delay period to infinity,
and the potentially corrected delay period (h).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple[float, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternRepeating.get_dose_finite">
<span class="sig-name descname"><span class="pre">get_dose_finite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime.datetime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternRepeating.get_dose_finite" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dose (mSv) from sharing the repeating pattern with a radioactive person between 2 time points.</p>
<p>For example, the dose if the pattern is resumed after some delay period
then ceased again permanently at a later time.</p>
<p>NB. If <code class="docutils literal notranslate"><span class="pre">t1</span></code> or <code class="docutils literal notranslate"><span class="pre">t2</span></code> end during a pattern element, the calculated dose is for
that time point shifted forward (by less than 1 h) to the end of the pattern element.
Hence, the potentially corrected time interval is returned along with the dose.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radiaoctive person.</p></li>
<li><p><strong>t1</strong> (<em>int</em><em> or </em><em>float</em>) – The time (h) from <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> to the start of the exposure.</p></li>
<li><p><strong>t2</strong> (<em>int</em><em> or </em><em>float</em>) – The time (h) from <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> to the end of the exposure.</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em>) – Administration datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">t2</span></code> less than <code class="docutils literal notranslate"><span class="pre">t1</span></code>.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dose (mSv) from the pattern between 2 time points
with respect to <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code>,
first time point (h), and second time point (h).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple[float, float, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact.ContactPatternRepeating.get_restriction">
<span class="sig-name descname"><span class="pre">get_restriction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_constraint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime.datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#glowgreen.close_contact.ContactPatternRepeating.get_restriction" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the restriction period; i.e., the least time from administration
(up to the resolution of the pattern element widths)
to when sharing the pattern with a radioactive person can be resumed, such that the lifetime dose from the
infinitely repeating pattern is less than the dose constraint.</p>
<p>NB. Using <code class="docutils literal notranslate"><span class="pre">next_element</span></code> True is advisable and can make a large difference for sparse repeating patterns such as public transport to and from work.
For example, if we want you to miss the morning bus, it means you have to wait for the afternoon bus;
you can’t just get on the morning bus at 9 AM instead of 8 AM and expect to comply with the dose constraint.
By always having the end of the restriction period coincide with the start of a pattern element,
it is clear that contact can resume immediately at the end of the restriction period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>dose_constraint</strong> (<em>int</em><em> or </em><em>float</em>) – Dose constraint (mSv).</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em>) – Administration datetime.</p></li>
<li><p><strong>next_element</strong> (<em>bool</em><em>, </em><em>optional</em>) – If the end of the restriction period does not coincide with the start of a pattern element,
extend the restriction period to the start of the next pattern element. Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">dose_constraint</span></code> not greater than 0.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>Calculated restriction period (h),
dose (mSv) from the pattern from the end of this restriction period to infinity,
and the datetime at the end of this restriction period.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">next_element</span></code> False, the calculated restriction period is in the range:
[true restriction period, true restriction period + (1 h) - min(<code class="docutils literal notranslate"><span class="pre">self</span></code>.c)[,
where the true restriction period is limited only by the pattern element widths.</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple[float, float, datetime.datetime]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="glowgreen.close_contact._ContactPattern">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">_ContactPattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#glowgreen.close_contact._ContactPattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for <a class="reference internal" href="#glowgreen.close_contact.ContactPatternRepeating" title="glowgreen.close_contact.ContactPatternRepeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContactPatternRepeating</span></code></a> and
<a class="reference internal" href="#glowgreen.close_contact.ContactPatternOnceoff" title="glowgreen.close_contact.ContactPatternOnceoff"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContactPatternOnceoff</span></code></a>.
Not for instantiation.</p>
<p>Contains methods common to both repeating and onceoff contact patterns.</p>
<p>Subclass constructors first <cite>super</cite> this constructor to perform
non-specific quality control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Start times (h) of pattern elements.</p></li>
<li><p><strong>c</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Durations (h) of pattern elements.</p></li>
<li><p><strong>d</strong> (<em>int</em><em>, </em><em>float</em><em>, </em><em>list</em><em> or </em><em>numpy.ndarray</em>) – Distances (m) of pattern elements.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code> is list or numpy.ndarray and <code class="docutils literal notranslate"><span class="pre">c</span></code> or <cite>d</cite> are not.</p></li>
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> are not equal length.</p></li>
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> or <code class="docutils literal notranslate"><span class="pre">d</span></code> contain a value not int, float, numpy.int32, numpy.int64 or numpy.float64.</p></li>
<li><p><strong>ValueError</strong> – If negative value in <code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> or <code class="docutils literal notranslate"><span class="pre">d</span></code>.</p></li>
<li><p><strong>ValueError</strong> – If pattern elements not provided in order.</p></li>
<li><p><strong>ValueError</strong> – If pattern elements overlap.</p></li>
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code> is int or float and <code class="docutils literal notranslate"><span class="pre">c</span></code> or <code class="docutils literal notranslate"><span class="pre">d</span></code> are not.</p></li>
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> or <code class="docutils literal notranslate"><span class="pre">d</span></code> is negative.</p></li>
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">theta</span></code> not type int, float, list or numpy.ndarray.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="glowgreen.close_contact._ContactPattern.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">clearance.Clearance_1m</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dose_constraint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#glowgreen.close_contact._ContactPattern.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a plot of the contact pattern and, if sufficient information is provided in optional args,
an additional plot of the dose from the pattern as a function of the
time from administration to beginning sharing the onceoff pattern, or
resuming sharing the repeating pattern, with a radioactive person.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – A name for the contact pattern, to appear in the figure title.</p></li>
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a><em>, </em><em>optional</em>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>dose_constraint</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Dose constraint (mSv).</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em><em>, </em><em>optional</em>) – Administration datetime.
Has no effect if pattern is onceoff.</p></li>
<li><p><strong>test</strong> (<em>bool</em><em>, </em><em>optional</em>) – Option to not show the plot. Used for testing. Default is False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="glowgreen.close_contact.cs_patterns">
<span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">cs_patterns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#glowgreen.close_contact.cs_patterns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe containing the contact patterns published by Cormack &amp; Shearer
along with appropriate dose constraints.</p>
<p>Reference: Cormack J &amp; Shearer J. “Calculation of radiation exposures from patients to whom
radioactive materials have been administered.” Phys Med Biol 1998; 43(3).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Dataframe with column labels:</dt><dd><ul class="simple">
<li><p><cite>name</cite> (str): A name for the contact pattern and dose constraint pairing.</p></li>
<li><p><cite>pattern_type</cite> (str): ‘repeating’ or ‘onceoff’, indicating the type of pattern.</p></li>
<li><p><cite>theta</cite> (int, float, list or numpy.ndarray): Start times (h) of pattern elements.</p></li>
<li><p><cite>c</cite> (int, float, list or numpy.ndarray): Durations (h) of pattern elements.</p></li>
<li><p><cite>d</cite> (int, float, list or numpy.ndarray): Distances (m) of pattern elements.</p></li>
<li><p><cite>dose_constraint</cite> (int or float): Dose constraint (mSv).</p></li>
<li><p><cite>per_episode</cite> (int): 1 if dose constraint is to be treated as per treatment episode, 0 if per annum.</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="glowgreen.close_contact.cs_restrictions">
<span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">cs_restrictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_treatments_in_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime.datetime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#glowgreen.close_contact.cs_restrictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe containing the restriction periods for the contact patterns and dose constraints from Cormack &amp; Shearer,
using the supplied dose rate clearance function, number of treatments anticipated in a year and administration datetime.</p>
<p>Reference: Cormack J &amp; Shearer J. “Calculation of radiation exposures from patients to whom
radioactive materials have been administered.” Phys Med Biol 1998; 43(3).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>num_treatments_in_year</strong> (<em>int</em><em> or </em><em>float</em>) – Number of treatments anticipated in a year.</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em>) – Administration datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dataframe with column labels:</dt><dd><ul class="simple">
<li><p><cite>name</cite> (str): Name of the contact pattern and dose constraint pairing.</p></li>
<li><p><cite>pattern_type</cite> (str): ‘repeating’ or ‘onceoff’, indicating the type of pattern.</p></li>
<li><p><cite>theta</cite> (int, float, list or numpy.ndarray): Start times (h) of pattern elements.</p></li>
<li><p><cite>c</cite> (int, float, list or numpy.ndarray): Durations (h) of pattern elements.</p></li>
<li><p><cite>d</cite> (int, float, list or numpy.ndarray): Distances (m) of pattern elements.</p></li>
<li><p><cite>dose_constraint</cite> (int or float): Dose constraint (mSv).</p></li>
<li><p><cite>per_episode</cite> (int): 1 if dose constraint is to be treated as per treatment episode, 0 if per annum.</p></li>
<li><p><cite>dose_constraint_corrected</cite> (float): Dose constraint (mSv) corrected for number of treatments in a year.
Only differs from <cite>dose_constraint</cite> if <cite>per_episode</cite> is 0. If <cite>per_episode</cite> is 0, <cite>dose_constraint</cite> is per annum, so
<cite>dose_constraint_corrected</cite> = <cite>dose_constraint</cite> / <code class="docutils literal notranslate"><span class="pre">num_treatments_in_year</span></code>.</p></li>
<li><p><cite>restriction_period</cite> (float): Calculated restriction period (h).</p></li>
<li><p><cite>dose</cite> (float): Dose (mSv) from the pattern with the calculated restriction period.</p></li>
<li><p><cite>datetime_end</cite> (datetime.datetime): Datetime at the end of the calculated restriction period.</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="glowgreen.close_contact.restrictions_for">
<span class="sig-prename descclassname"><span class="pre">glowgreen.close_contact.</span></span><span class="sig-name descname"><span class="pre">restrictions_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">clearance.Clearance_1m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_treatments_in_year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.datetime</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#glowgreen.close_contact.restrictions_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute restriction periods for the supplied contact patterns and dose constraints in a dataframe,
dose rate clearance function, number of treatments anticipated in a year and administration datetime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Dataframe that includes column labels <cite>pattern_type</cite>, <cite>theta</cite>, <cite>c</cite>, <cite>d</cite>, <cite>dose_constraint</cite> and <cite>per_episode</cite>.
See <code class="docutils literal notranslate"><span class="pre">Returns</span></code> section of <a class="reference internal" href="#glowgreen.close_contact.cs_patterns" title="glowgreen.close_contact.cs_patterns"><code class="xref py py-func docutils literal notranslate"><span class="pre">cs_patterns()</span></code></a>.</p></li>
<li><p><strong>cfit</strong> (<a class="reference internal" href="glowgreen.clearance.html#glowgreen.clearance.Clearance_1m" title="glowgreen.clearance.Clearance_1m"><em>clearance.Clearance_1m</em></a>) – Dose rate clearance from radioactive person.</p></li>
<li><p><strong>num_treatments_in_year</strong> (<em>int</em><em>, </em><em>float</em>) – Number of treatments anticipated in a year.
Used to scale <cite>dose_constraint</cite> if <cite>per_episode</cite> is 0.</p></li>
<li><p><strong>admin_datetime</strong> (<em>datetime.datetime</em><em>, </em><em>optional</em>) – Administration datetime.
Can only be omitted or None if <cite>pattern_type</cite> is ‘onceoff’ for all rows in <code class="docutils literal notranslate"><span class="pre">df</span></code>,
in which case the returned dataframe will have all None values in column <cite>datetime_end</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>KeyError</strong> – If <code class="docutils literal notranslate"><span class="pre">df</span></code> missing column label <cite>pattern_type</cite>, <cite>theta</cite>, <cite>c</cite>, <cite>d</cite>, <cite>dose_constraint</cite> or <cite>per_episode</cite>.</p></li>
<li><p><strong>ValueError</strong> – If row in <code class="docutils literal notranslate"><span class="pre">df</span></code> has <cite>pattern_type</cite> not ‘repeating’ or ‘onceoff’.</p></li>
<li><p><strong>ValueError</strong> – If row in <code class="docutils literal notranslate"><span class="pre">df</span></code> has <cite>pattern_type</cite> ‘repeating’ and <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> None.</p></li>
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">num_treatments_in_year</span></code> less than 1.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Deep copy of <code class="docutils literal notranslate"><span class="pre">df</span></code> with additional (or overwritten) columns labelled:</dt><dd><ul class="simple">
<li><p><cite>dose_constraint_corrected</cite> (float): Dose constraint (mSv) corrected for number of treatments in a year.
Only differs from <cite>dose_constraint</cite> if <cite>per_episode</cite> is 0. If <cite>per_episode</cite> is 0, <cite>dose_constraint</cite> is per annum, so
<cite>dose_constraint_corrected</cite> = <cite>dose_constraint</cite> / <code class="docutils literal notranslate"><span class="pre">num_treatments_in_year</span></code>.</p></li>
<li><p><cite>restriction_period</cite> (float): Calculated restriction period (h).</p></li>
<li><p><cite>dose</cite> (float): Dose (mSv) from the pattern with the calculated restriction period.</p></li>
<li><p><cite>datetime_end</cite> (datetime.datetime): Datetime at the end of the calculated restriction period
(None if <code class="docutils literal notranslate"><span class="pre">admin_datetime</span></code> is None).</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="glowgreen.clearance.html"
                        title="previous chapter">glowgreen.clearance module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/glowgreen.close_contact.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glowgreen.clearance.html" title="glowgreen.clearance module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">glowgreen 0.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >API reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="glowgreen.html" >glowgreen package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">glowgreen.close_contact module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Jake Forster and South Australia Medical Imaging.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.1.
    </div>
  </body>
</html>